CREATE  TABLE  PARTY(
  NAME  VARCHAR(25),
  HEADQUARTERS  VARCHAR(20) NOT NULL,
  EMAIL  VARCHAR(35) NOT NULL,
  PRESIDENT  VARCHAR(20) NOT NULL,
  SECRETARY VARCHAR(20) NOT NULL,
  TREASURER VARCHAR(20) NOT NULL,
  MEMBERS  INT DEFAULT  4,
  CHIEF  INT(8)  NOT NULL,
  PHONE  VARCHAR(15) NOT NULL,
  DOF  DATE  NOT  NULL,
  PASSWORD  VARCHAR(8) NOT NULL,
  IMGID  BIGINT(20) NOT NULL REFERENCES IMAGE(IMGID)ON DELETE CASCADE,
  CONSTRAINT PARTY_NAME_PK PRIMARY KEY(NAME),
  CONSTRAINT PARTY_CHIEF_FK FOREIGN KEY(CHIEF) REFERENCES  VOTERS(ID) ON DELETE CASCADE,
  CONSTRAINT PARTY_PASSWORD_CK  CHECK(LENGTH(PASSWORD) BETWEEN 6 AND 8),
);

DROP PROCEDURE IF EXISTS PARTY_INSERT;
DELIMITER $$
CREATE   PROCEDURE  PARTY_INSERT
(
  IN NAME  VARCHAR(25),
  IN HEADQUARTERS  VARCHAR(20) ,
  IN EMAIL  VARCHAR(35) ,
  IN PRESIDENT  VARCHAR(20) ,
  IN SECRETARY VARCHAR(20) ,
  IN TREASURER VARCHAR(20) ,
  IN MEMBERS  INT ,
  IN CHIEF  INT(8)  ,
  IN PHONE  VARCHAR(15) ,
  IN DOF  DATE  ,
  IN PASSWORD  VARCHAR(8) ,
  IN ID BIGINT(8)
) 
BEGIN

 INSERT INTO PARTY VALUES(UPPER(NAME),UPPER(HEADQUARTERS),LOWER(EMAIL),UPPER(PRESIDENT),UPPER(SECRETARY),UPPER(TREASURER),MEMBERS,CHIEF,PHONE,DOF,PASSWORD,ID);

 UPDATE  IMAGE  SET STATUS=1 WHERE IMGID=ID;
END  $$
  


